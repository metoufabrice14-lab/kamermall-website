<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kamermall - Marketplace Camerounais</title>
  <!-- Font Awesome pour les icônes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --red: #e60000;
      --bg: #f8f8f8;
      --text: #333;
      --card: #ffffff;
      --muted: #777;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; font-family: Arial, sans-serif; color: var(--text); background: var(--bg); }
    .announcement-bar {
      background: var(--red);
      color: #fff;
      text-align: center;
      padding: 10px 0;
      font-weight: bold;
    }
    header { background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,.1); position: sticky; top: 0; z-index: 10; }
    .header-top, .header-bottom {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px 20px;
    }
    .logo { display: flex; align-items: center; text-decoration: none; color: #000; }
    .logo-icon { font-size: 40px; color: var(--red); margin-right: 10px; }
    .logo-text { font-size: 22px; font-weight: bold; }
    .logo-tagline { font-size: 12px; color: var(--muted); }
    .contact-info { display: flex; gap: 12px; align-items: center; }
    .contact-item { display: inline-flex; align-items: center; text-decoration: none; color: #333; font-size: 13px; }
    .contact-item i { margin-right: 6px; color: var(--red); }
    .user-actions { display: flex; gap: 14px; align-items: center; }
    .action-btn { display: inline-flex; align-items: center; text-decoration: none; color: #333; font-size: 13px; }
    .action-btn i { margin-right: 6px; font-size: 16px; }
    .search-container { display: flex; align-items: center; gap: 8px; }
    .search-box {
      padding: 8px 12px; border: 1px solid #ccc; border-radius: 6px;
      min-width: 260px; background: #fff;
    }
    .search-btn {
      background: var(--red); color: #fff; border: none;
      padding: 8px 12px; border-radius: 6px; cursor: pointer;
    }
    .hamburger { display: none; flex-direction: column; cursor: pointer; width: 30px; height: 25px; justify-content: space-between; }
    .hamburger span { display: block; height: 3px; background: #333; border-radius: 2px; transition: 0.3s; }
    nav { background: #fff; }
    .nav-menu { list-style: none; padding: 0; margin: 0; display: flex; gap: 20px; align-items: center; }
    .nav-item a { text-decoration: none; color: #333; padding: 10px 12px; display: flex; align-items: center; gap: 6px; }
    .nav-item a:hover { background: #f0f0f0; border-radius: 6px; }
    @media (max-width: 768px) {
      .header-bottom { flex-wrap: wrap; gap: 10px; align-items: center; }
      .search-box { width: 100%; min-width: 0; }
      .hamburger { display: flex; }
      nav { position: fixed; top: 0; right: -100%; width: 260px; height: 100%; flex-direction: column; padding-top: 60px; transition: right .3s; z-index: 30; border-left: 1px solid #eee; }
      nav.active { right: 0; }
      .menu-overlay { display: none; }
      .menu-overlay.active { display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,.5); z-index: 20; }
    }
    /* Sections */
    .page-section { display: none; padding: 40px 20px; }
    .page-section.active { display: block; }
    /* Filters + categories bar */
    .filters { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; margin: 12px 0 6px; }
    .filters label { font-size: 13px; color: #555; }
    .filters select, .filters input { padding: 8px 10px; border-radius: 6px; border: 1px solid #ccc; }
    .categories { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 6px; }
    .category-card {
      background: var(--card); border-radius: 10px; padding: 16px; width: calc(25% - 12px);
      text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,.08);
      min-width: 180px; cursor: pointer; transition: transform .2s; border: 2px solid transparent;
    }
    .category-card.active { border-color: var(--red); box-shadow: 0 4px 12px rgba(230,0,0,.25); transform: translateY(-2px); }
    .category-card:hover { transform: translateY(-2px); }
    .category-card i { font-size: 28px; color: var(--red); margin-bottom: 6px; display: block; }
    .category-card h3 { font-size: 14px; margin: 0; }
    .products-controls { display: flex; justify-content: space-between; align-items: center; gap: 12px; margin: 10px 0 20px; flex-wrap: wrap; }
    .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 16px; }
    .product-card {
      background: var(--card); border-radius: 12px; padding: 14px; box-shadow: 0 2px 8px rgba(0,0,0,.08);
      display: flex; flex-direction: column; align-items: stretch; border: 1px solid #eee;
    }
    .product-image { height: 120px; display: flex; align-items: center; justify-content: center; background: #fafafa; border-radius: 8px; margin-bottom: 8px; }
    .product-image i { font-size: 48px; color: var(--red); }
    .product-title { font-weight: bold; font-size: 15px; margin: 6px 0; }
    .product-price { color: #333; font-weight: bold; margin: 4px 0 8px; }
    .rating { color: #f5a623; font-size: 13px; margin-bottom: 8px; }
    .btn { padding: 8px 10px; border-radius: 6px; border: 1px solid #ccc; background: #fff; cursor: pointer; font-size: 13px; display: inline-flex; align-items: center; gap: 6px; }
    .btn.primary { background: var(--red); color: #fff; border: none; }
    .btn.secondary { background: #f0f0f0; }
    .cart-indicator { background: var(--red); color: #fff; border-radius: 999px; padding: 2px 8px; font-size: 12px; }
    /* Modal paiement */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.6); display: none; align-items: center; justify-content: center; z-index: 40; }
    .modal-overlay.active { display: flex; }
    .modal { background: #fff; border-radius: 12px; width: min(640px, 92%); padding: 20px; box-shadow: 0 10px 40px rgba(0,0,0,.25); }
    .modal h3 { margin-top: 0; }
    .payment-option { display: flex; align-items: center; gap: 12px; padding: 12px; border: 1px solid #eee; border-radius: 8px; cursor: pointer; }
    .payment-option.active { border-color: var(--red); background: #fff6f6; }
    .payment-icon { font-size: 22px; width: 40px; text-align: center; color: var(--red); }
    .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 12px; }
    .card-form { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 8px; }
    .card-form input { padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
    .hidden { display: none; }
    /* Footer ... */
    footer { background: #222; color: #ccc; padding: 40px 20px; }
    .footer-content { display: flex; flex-wrap: wrap; gap: 20px; }
    .footer-column { flex: 1; min-width: 200px; }
    .footer-column h3 { color: #fff; margin-bottom: 12px; }
    .footer-links { list-style: none; padding: 0; margin: 0; }
    .footer-links li { margin-bottom: 8px; }
    .footer-links a { color: #ccc; text-decoration: none; }
    .footer-links a:hover { text-decoration: underline; }
    .social-links { display: flex; gap: 10px; margin-top: 6px; }
    .social-link { color: #ccc; font-size: 20px; }
    .footer-bottom { text-align: center; margin-top: 20px; font-size: 13px; color: #777; }
    /* Newsletter & cookies ... */
    .newsletter-form { display: flex; margin-top: 6px; }
    .newsletter-input { flex: 1; padding: 8px 10px; border: 1px solid #555; border-radius: 4px 0 0 4px; }
    .newsletter-btn { background: var(--red); border: none; padding: 8px 12px; border-radius: 0 4px 4px 0; color: #fff; cursor: pointer; }
    .cookie-banner { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 1px solid #eee; padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; gap: 12px; z-index: 50; }
    .cookie-banner p { margin: 0; font-size: 13px; color: #555; }
    .cookie-banner button { background: var(--red); color: #fff; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
    /* No results message */
    .no-results { display: none; padding: 12px; color: #666; }
    .no-results.active { display: block; }
  </style>
</head>
<body>
  <div class="announcement-bar">
    Lancement officiel ! Livraison gratuite à Yaoundé et Douala pour toute commande &gt; 10.000 FCFA
  </div>
  <!-- En-tête -->
  <header>
    <div class="container header-top">
      <a href="#home" class="logo" aria-label="Kamermall Accueil">
        <i class="fas fa-shopping-bag logo-icon"></i>
        <div>
          <div class="logo-text">KAMERMALL</div>
          <div class="logo-tagline">Marketplace 100% Camerounaise</div>
        </div>
      </a>
      <!-- Recherche + actions -->
      <div class="search-container" aria-label="Recherche principale">
        <input id="search-input" class="search-box" type="text" placeholder="Rechercher des produits..." />
        <button id="search-btn" class="search-btn" aria-label="Lancer la recherche">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <div class="user-actions" aria-label="Actions utilisateur">
        <a href="#account" class="action-btn active" aria-label="Mon compte"><i class="fas fa-user"></i> Mon compte</a>
        <a href="#favorites" class="action-btn"><i class="fas fa-heart"></i> Favoris</a>
        <button id="checkout-trigger" class="action-btn" aria-label="Payer">
          <i class="fas fa-credit-card"></i> Payer au Panier <span id="cart-count" class="cart-indicator" style="margin-left:6px; display:none;">0</span>
        </button>
      </div>
      <div class="hamburger" id="hamburger" tabindex="0" role="button" aria-label="Menu" aria-pressed="false">
        <span></span><span></span><span></span>
      </div>
    </div>
    <!-- Navigation -->
    <nav id="main-nav" aria-label="Menu principal" class="nav" >
      <ul class="nav-menu">
        <li class="nav-item"><a href="#home" class="nav-link"><i class="fas fa-home"></i> Accueil</a></li>
        <li class="nav-item"><a href="#categories" class="nav-link"><i class="fas fa-tags"></i> Catégories</a></li>
        <li class="nav-item"><a href="#products" class="nav-link"><i class="fas fa-box"></i> Produits</a></li>
        <li class="nav-item"><a href="#sellers" class="nav-link"><i class="fas fa-store"></i> Vendeurs</a></li>
        <li class="nav-item"><a href="#promotions" class="nav-link"><i class="fas fa-tag"></i> Promotions</a></li>
        <li class="nav-item"><a href="#about" class="nav-link"><i class="fas fa-info-circle"></i> À propos</a></li>
        <li class="nav-item"><a href="#contact" class="nav-link"><i class="fas fa-phone-alt"></i> Contact</a></li>
      </ul>
    </nav>
    <div id="overlay" class="menu-overlay" aria-hidden="true"></div>
  </header>
  <!-- Sections -->
  <main>
    <section id="home" class="page-section active" aria-labelledby="home-title">
      <h1 id="home-title">Bienvenue sur Kamermall</h1>
      <p>Marketplace 100% Camerounaise: achetez local, soutenez les vendeurs locaux.</p>
    </section>
    <section id="categories" class="page-section" aria-labelledby="categories-title">
      <h2 id="categories-title">Nos Catégories</h2>
      <!-- Filtres rapides et boutons catégories -->
      <div class="filters" aria-label="Filtres rapides">
        <span>Filtrer par catégorie:</span>
        <div id="categories-bar" class="categories" style="gap:12px;">
          <!-- Les catégories seront générées/actives dynamiquement ici -->
          <div class="category-card" data-category="Électronique" title="Électronique">
            <i class="fas fa-laptop"></i><h3>Électronique</h3>
          </div>
          <div class="category-card" data-category="Vêtements" title="Vêtements">
            <i class="fas fa-tshirt"></i><h3>Vêtements</h3>
          </div>
          <div class="category-card" data-category="Maison" title="Maison">
            <i class="fas fa-home"></i><h3>Maison</h3>
          </div>
          <div class="category-card" data-category="Automobile" title="Automobile">
            <i class="fas fa-car"></i><h3>Automobile</h3>
          </div>
        </div>
      </div>
      <!-- Filtres avancés -->
      <div class="filters" aria-label="Filtrage avancé">
        <label for="min-price">Prix min:</label>
        <input id="min-price" type="number" min="0" step="100" value="0" style="width:110px;" />
        <label for="max-price">Prix max:</label>
        <input id="max-price" type="number" min="0" step="100" value="100000" style="width:110px;" />
        <label for="sort-select">Tri:</label>
        <select id="sort-select" aria-label="Trier par">
          <option value="popularity">Pertinence</option>
          <option value="price-asc">Prix croissant</option>
          <option value="price-desc">Prix décroissant</option>
          <option value="rating-desc">Avis (note)</option>
        </select>
        <button id="reset-filters" class="btn" style="margin-left:auto;">Réinitialiser</button>
      </div>
      <!-- Liste des catégories principales -->
      <div class="categories" id="categories-list" role="list"></div>
    </section>
    <section id="products" class="page-section" aria-labelledby="products-title">
      <h2 id="products-title">Nos Produits</h2>
      <div class="products-controls" aria-label="Contrôles produits">
        <span>Résultats: <strong id="result-count">0</strong></span>
        <span id="no-results" class="no-results" aria-live="polite" style="display:none;">Aucun produit ne correspond à votre recherche.</span>
      </div>
      <div id="product-grid" class="products-grid" role="list" aria-label="Catalogue produit"></div>
      <div class="no-results" id="no-resultsMessage" aria-live="polite" style="margin-top:8px; display:none;">Aucun produit ne correspond.</div>
    </section>
    <!-- Autres sections -->
    <section id="sellers" class="page-section" aria-labelledby="sellers-title">
      <h2 id="sellers-title">Vendeurs</h2>
      <p>Liste des vendeurs partenaires (section fictive pour démonstration).</p>
    </section>
    <section id="promotions" class="page-section" aria-labelledby="promotions-title">
      <h2 id="promotions-title">Promotions</h2>
      <p>Offres et réductions en cours.</p>
    </section>
    <section id="about" class="page-section" aria-labelledby="about-title">
      <h2 id="about-title">À propos</h2>
      <p>Kamermall est une marketplace camerounaise.</p>
    </section>
    <section id="contact" class="page-section" aria-labelledby="contact-title">
      <h2 id="contact-title">Contact</h2>
      <p>Nous contacter: contact@kamermall.cm</p>
    </section>
  </main>
  <!-- Pied de page -->
  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>KAMERMALL</h3>
        <p>La première marketplace 100% camerounaise, connectant acheteurs et vendeurs locaux.</p>
        <div class="social-links">
          <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h3>Liens Rapides</h3>
        <ul class="footer-links">
          <li><a href="#home">Accueil</a></li>
          <li><a href="#categories">Catégories</a></li>
          <li><a href="#products">Produits</a></li>
          <li><a href="#about">À propos</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Service Client</h3>
        <ul class="footer-links">
          <li><a href="#help">Aide & FAQ</a></li>
          <li><a href="#shipping">livraison</a></li>
          <li><a href="#returns">Retours</a></li>
          <li><a href="#terms">Conditions</a></li>
          <li><a href="#privacy">Confidentialité</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Newsletter</h3>
        <p>Inscrivez-vous pour recevoir nos offres exclusives</p>
        <form class="newsletter-form" onsubmit="return false;">
          <input type="email" class="newsletter-input" placeholder="Votre email" />
          <button type="submit" class="newsletter-btn">S'inscrire</button>
        </form>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Kamermall. Tous droits réservés.</p>
    </div>
  </footer>
  <!-- Modal paiement -->
  <div id="payment-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-label="Paiement">
    <div class="modal" aria-labelledby="payment-title">
      <h3 id="payment-title">Paiement sécurisé</h3>
      <p>Sélectionnez votre moyen de paiement:</p>
      <div id="momo-option" class="payment-option" data-method="momo" tabindex="0" role="button" aria-label="Paiement MoMo">
        <div class="payment-icon"><i class="fas fa-mobile-alt" aria-hidden="true"></i></div>
        <div><strong>Mobile Money (MoMo)</strong><div style="font-size:12px;color:#555;"> MTN Momo / MTN ou Orange Money</div></div>
      </div>
      <div id="om-option" class="payment-option" data-method="om" tabindex="0" role="button" aria-label="Paiement Orange Money">
        <div class="payment-icon"><i class="fas fa-wallet" aria-hidden="true"></i></div>
        <div><strong>Orange Money (OM)</strong><div style="font-size:12px;color:#555;">Paiement via Orange Money</div></div>
      </div>
      <div id="card-option" class="payment-option" data-method="card" tabindex="0" role="button" aria-label="Paiement par Carte Bancaire">
        <div class="payment-icon"><i class="fas fa-credit-card" aria-hidden="true"></i></div>
        <div><strong>Carte Bancaire</strong><div style="font-size:12px;color:#555;">Paiement par carte (Visa/Mastercard)</div></div>
      </div>
      <div id="cod-option" class="payment-option" data-method="cod" tabindex="0" role="button" aria-label="Paiement à la livraison">
        <div class="payment-icon"><i class="fas fa-truck" aria-hidden="true"></i></div>
        <div><strong>Paiement à la livraison</strong><div style="font-size:12px;color:#555;">Paiement à la livraison (COD)</div></div>
      </div>
      <div id="paypal-option" class="payment-option" data-method="paypal" tabindex="0" role="button" aria-label="Paiement PayPal">
        <div class="payment-icon"><i class="fab fa-paypal" aria-hidden="true"></i></div>
        <div><strong>PayPal</strong><div style="font-size:12px;color:#555;">Paiement via PayPal</div></div>
      </div>
      <div id="order-summary" style="margin-top:12px; padding: 8px; border: 1px solid #eee; border-radius: 8px;">
        <!-- Récapitulatif inséré dynamiquement -->
      </div>
      <div class="hidden" id="card-form-container" aria-live="polite" style="margin-top:10px;">
        <div class="card-form" aria-label="formulaire carte bancaire">
          <input id="card-number" placeholder="N° de carte" />
          <input id="card-name" placeholder="Titulaire" />
          <input id="card-expiry" placeholder="MM/AA" />
          <input id="card-cvv" placeholder="CVV" />
        </div>
      </div>
      <div class="modal-actions">
        <button id="pay-button" class="btn primary" disabled><i class="fas fa-check"></i> Confirmer le paiement</button>
        <button id="cancel-pay" class="btn" aria-label="Annuler paiement">Annuler</button>
      </div>
      <div id="payment-status" style="margin-top:12px; font-size:14px; color:#333;"></div>
    </div>
  </div>
  <!-- Overlay (mobile menu) -->
  <div id="screen-overlay" class="menu-overlay" style="display:none;"></div>
  <!-- Cookie banner -->
  <div class="cookie-banner" id="cookie-banner">
    <p>Nous utilisons des cookies pour améliorer votre expérience. En poursuivant, vous acceptez notre politique de cookies.</p>
    <button id="cookie-accept">Accepter</button>
  </div>
  <!-- Script -->
  <script>
    // Variables principales
    const searchInput = document.getElementById('search-input');
    const searchBtn = document.getElementById('search-btn');
    const productGrid = document.getElementById('product-grid');
    const noResultsEl = document.getElementById('no-results');
    const resultCountEl = document.getElementById('result-count');
    const addToCartButtons = document.querySelectorAll('.add-to-cart');
    const cartCountEl = document.getElementById('cart-count');
    const checkoutTrigger = document.getElementById('checkout-trigger');
    const paymentModal = document.getElementById('payment-modal');
    const overlay = document.getElementById('overlay');
    const momoOption = document.getElementById('momo-option');
    const omOption = document.getElementById('om-option');
    const cardOption = document.getElementById('card-option');
    const codOption = document.getElementById('cod-option');
    const paypalOption = document.getElementById('paypal-option');
    const payButton = document.getElementById('pay-button');
    const cancelPay = document.getElementById('cancel-pay');
    const paymentStatus = document.getElementById('payment-status');
    const screenOverlay = document.getElementById('screen-overlay');
    const hamburger = document.getElementById('hamburger');
    const mainNav = document.getElementById('main-nav');
    const navLinks = document.querySelectorAll('.nav-link');
    const minPriceInput = document.getElementById('min-price');
    const maxPriceInput = document.getElementById('max-price');
    const sortSelect = document.getElementById('sort-select');
    const categoryCards = document.querySelectorAll('.category-card');
    const resetFiltersBtn = document.getElementById('reset-filters');
    const cardNumberInput = document.getElementById('card-number');
    const cardNameInput = document.getElementById('card-name');
    const cardExpiryInput = document.getElementById('card-expiry');
    const cardCvvInput = document.getElementById('card-cvv');
    const cookieBanner = document.getElementById('cookie-banner');
    const cookieAccept = document.getElementById('cookie-accept');
    const orderSummaryEl = document.getElementById('order-summary');

    // État
    let cart = [];
    let currentQuery = '';
    let currentCategory = 'all';
    let minPrice = 0;
    let maxPrice = 100000;
    let currentSort = 'popularity';
    let selectedMethod = '';

    // Données produits (exemple, à adapter)
    const products = [
      // Électronique
      { id:'p1', title:'Smartphone X Pro', category:'Électronique', price:29990, rating:4.5, tags:'smartphone,phone' },
      { id:'p6', title:'Vélo Ville 26\'\'', category:'Électronique', price:65000, rating:4.6, tags:'vélo,transport' },
      { id:'p7', title:'Tablette Samsung', category:'Électronique', price:15000, rating:4.3, tags:'tablette,android' },
      { id:'p8', title:'Casque Bluetooth', category:'Électronique', price:7800, rating:4.0, tags:'casque,wireless' },
      { id:'p9', title:'Smartwatch Fit', category:'Électronique', price:12000, rating:4.2, tags:'montre,smartwatch' },
      { id:'p10', title:'Caméra de Sécurité', category:'Électronique', price:22000, rating:4.4, tags:'caméra,sécurité' },
      { id:'p11', title:'Haut-parleur Bluetooth', category:'Électronique', price:9500, rating:4.1, tags:'haut-parleur,wireless' },
      // Vêtements
      { id:'p2', title:'T-shirt Casual Masculin', category:'Vêtements', price:5500, rating:4.2, tags:'vetements,tshirt' },
      { id:'p12', title:'Jeans Slim Fit', category:'Vêtements', price:15000, rating:4.3, tags:'jeans,pantalon' },
      { id:'p13', title:'Robe d’été', category:'Vêtements', price:12000, rating:4.5, tags:'robe,été' },
      { id:'p14', title:'Chaussures de Sport', category:'Vêtements', price:9990, rating:4.1, tags:'chaussures,sport' },
      { id:'p15', title:'Veste en Jean', category:'Vêtements', price:18000, rating:4.4, tags:'veste,jean' },
      { id:'p16', title:'Pull en laine', category:'Vêtements', price:13000, rating:4.2, tags:'pull,laine' },
      { id:'p17', title:'Shorts Casual', category:'Vêtements', price:7000, rating:4.0, tags:'shorts,été' },
      // Maison
      { id:'p3', title:'Cafetière Express', category:'Maison', price:18750, rating:4.0, tags:'cafe,électroménager' },
      { id:'p4', title:'Lampe LED Designer', category:'Maison', price:3900, rating:4.3, tags:'luminaire,éclairage' },
      { id:'p18', title:'Canapé 3 places', category:'Maison', price:85000, rating:4.5, tags:'canapé,meuble' },
      { id:'p19', title:'Table à manger', category:'Maison', price:60000, rating:4.2, tags:'table,mobilier' },
      { id:'p20', title:'Réfrigérateur', category:'Maison', price:95000, rating:4.4, tags:'frigo,électroménager' },
      { id:'p21', title:'Four Micro-ondes', category:'Maison', price:15000, rating:4.1, tags:'micro-ondes,cuisine' },
      { id:'p22', title:'Tapis Moderne', category:'Maison', price:12000, rating:4.0, tags:'tapis,décoration' },
      // Automobile
      { id:'p23', title:'Vélo Ville 26\'\'', category:'Automobile', price:65000, rating:4.6, tags:'vélo,transport' },
      { id:'p24', title:'Accessoires Auto', category:'Automobile', price:20000, rating:4.2, tags:'auto,accessoires' },
      { id:'p25', title:'Pneus 185/60', category:'Automobile', price:50000, rating:4.4, tags:'pneus,roues' },
      { id:'p26', title:'Siège Auto', category:'Automobile', price:30000, rating:4.1, tags:'siège,auto' },
      { id:'p27', title:'Kit de Nettoyage', category:'Automobile', price:7000, rating:4.0, tags:'nettoyage,auto' },
      { id:'p28', title:'Caméra Dashcam', category:'Automobile', price:25000, rating:4.3, tags:'caméra,auto' },
      { id:'p29', title:'Housse de Siège', category:'Automobile', price:8000, rating:4.2, tags:'housse,auto' }
    ];

    // Fonction pour afficher/filtrer produits
    function filterProducts() {
      const filtered = products.filter(p => {
        const matchesQuery = !currentQuery || p.title.toLowerCase().includes(currentQuery) || p.tags.toLowerCase().includes(currentQuery);
        const matchesCategory = currentCategory === 'all' || p.category.toLowerCase() === currentCategory;
        const matchesPrice = p.price >= minPrice && p.price <= maxPrice;
        return matchesQuery && matchesCategory && matchesPrice;
      });
      // Tri
      if (currentSort === 'price-asc') {
        filtered.sort((a,b) => a.price - b.price);
      } else if (currentSort === 'price-desc') {
        filtered.sort((a,b) => b.price - a.price);
      } else if (currentSort === 'rating-desc') {
        filtered.sort((a,b) => b.rating - a.rating);
      } else {
        // pertinence (par rating décroissant)
        filtered.sort((a,b) => b.rating - a.rating);
      }
      // Affichage
      const grid = document.getElementById('product-grid');
      grid.innerHTML = '';
      document.getElementById('result-count').textContent = filtered.length;
      document.getElementById('no-results').style.display = filtered.length === 0 ? 'block' : 'none';

      filtered.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.setAttribute('role', 'listitem');
        card.setAttribute('aria-label', p.title);
        card.innerHTML = `
          <div class="product-image"><i class="fas fa-box-open"></i></div>
          <div class="product-title">${p.title}</div>
          <div class="rating" aria-label="Note ${p.rating} sur 5">${'★'.repeat(Math.round(p.rating))}${'☆'.repeat(5 - Math.round(p.rating))}</div>
          <div class="product-price">${formatPrice(p.price)}</div>
          <button class="btn add-to-cart" data-id="${p.id}" aria-label="Ajouter ${p.title} au panier"><i class="fas fa-plus"></i>Ajouter au panier</button>
        `;
        grid.appendChild(card);
      });
      // Ajoute événements pour "Ajouter au panier"
      document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.onclick = () => {
          const id = btn.dataset.id;
          const product = products.find(p => p.id === id);
          if (product) {
            cart.push(product);
            cartCountEl.style.display = 'inline-block';
            cartCountEl.textContent = cart.length;
          }
        };
      });
    }

    // Fonctions pour gérer la navigation et le filtrage
    function setActiveCategory(cat) {
      currentCategory = cat;
      document.querySelectorAll('.category-card').forEach(c => {
        c.classList.toggle('active', c.dataset.category.toLowerCase() === cat);
      });
      filterProducts();
    }

    // Événements
    document.querySelectorAll('.category-card').forEach(c => {
      c.onclick = () => {
        setActiveCategory(c.dataset.category.toLowerCase());
      };
    });
    document.getElementById('search-btn').onclick = () => {
      currentQuery = document.getElementById('search-input').value.toLowerCase().trim();
      filterProducts();
    };
    document.getElementById('search-input').onkeyup = (e) => {
      if (e.key === 'Enter') {
        currentQuery = document.getElementById('search-input').value.toLowerCase().trim();
        filterProducts();
      }
    };
    document.getElementById('sort-select').onchange = () => {
      currentSort = document.getElementById('sort-select').value;
      filterProducts();
    };
    document.getElementById('reset-filters').onclick = () => {
      currentQuery = '';
      document.getElementById('search-input').value = '';
      currentCategory = 'all';
      setActiveCategory('all');
      document.getElementById('min-price').value = 0;
      document.getElementById('max-price').value = 100000;
      minPrice = 0;
      maxPrice = 100000;
      document.getElementById('sort-select').value = 'popularity';
      currentSort = 'popularity';
      filterProducts();
    };
    document.getElementById('min-price').oninput = () => {
      minPrice = parseInt(document.getElementById('min-price').value) || 0;
      filterProducts();
    };
    document.getElementById('max-price').oninput = () => {
      maxPrice = parseInt(document.getElementById('max-price').value) || 100000;
      filterProducts();
    };

    // Gestion du menu mobile
    document.getElementById('hamburger').onclick = () => {
      document.getElementById('main-nav').classList.toggle('active');
    };
    document.getElementById('overlay').onclick = () => {
      document.getElementById('main-nav').classList.remove('active');
    };
    document.querySelectorAll('.nav-link').forEach(link => {
      link.onclick = (e) => {
        e.preventDefault();
        document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
        document.getElementById(link.getAttribute('href').slice(1)).classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        document.getElementById('main-nav').classList.remove('active');
      };
    });

    // Ouvrir modal paiement
    document.getElementById('checkout-trigger').onclick = () => {
      if (cart.length === 0) {
        alert('Votre panier est vide.');
        return;
      }
      openPaymentModal();
    };

    // Modal paiement
    const modal = document.getElementById('payment-modal');
    const overlayModal = document.getElementById('screen-overlay');
    let selectedPaymentMethod = '';

    function openPaymentModal() {
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden', 'false');
      overlayModal.style.display = 'block';
    }
    function closePaymentModal() {
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      overlayModal.style.display = 'none';
      // reset selections
      document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('active'));
      document.getElementById('order-summary').innerHTML = '';
      document.getElementById('card-form-container').classList.add('hidden');
      document.getElementById('payment-status').innerHTML = '';
      document.getElementById('pay-button').disabled = true;
    }

    document.querySelectorAll('.payment-option').forEach(opt => {
      opt.onclick = () => {
        document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('active'));
        opt.classList.add('active');
        selectedPaymentMethod = opt.dataset.method;
        if (selectedPaymentMethod === 'card') {
          document.getElementById('card-form-container').classList.remove('hidden');
          document.getElementById('pay-button').disabled = true;
        } else {
          document.getElementById('card-form-container').classList.add('hidden');
          document.getElementById('pay-button').disabled = false;
        }
        renderOrderSummary();
      };
    });
    document.getElementById('cancel-pay').onclick = () => closePaymentModal();

    // Validation formulaire carte
    const cardInputs = [
      document.getElementById('card-number'),
      document.getElementById('card-name'),
      document.getElementById('card-expiry'),
      document.getElementById('card-cvv')
    ];
    cardInputs.forEach(input => {
      input.oninput = () => {
        validateCardForm();
      };
    });
    function validateCardForm() {
      const valid = cardInputs.every(input => input.value.trim().length >= 3);
      document.getElementById('pay-button').disabled = !valid;
    }

    // Paiement
    document.getElementById('pay-button').onclick = async () => {
      if (!selectedPaymentMethod) return;
      // Affiche le message
      document.getElementById('payment-status').innerText = 'Paiement en cours...';
      document.getElementById('pay-button').disabled = true;

      // Simuler un paiement réussi (ou intégration API)
      setTimeout(() => {
        document.getElementById('payment-status').innerText = 'Paiement réussi !';
        cart = [];
        cartCountEl.style.display = 'none';
        cartCountEl.textContent = '0';
        setTimeout(() => closePaymentModal(), 1500);
      }, 1500);
    };

    // Ajouter au panier
    document.querySelectorAll('.add-to-cart').forEach(btn => {
      btn.onclick = () => {
        const productId = btn.dataset.id;
        const product = products.find(p => p.id === productId);
        if (product) {
          cart.push(product);
          cartCountEl.style.display = 'inline-block';
          cartCountEl.textContent = cart.length;
        }
      };
    });
  </script>
</body>
</html>
